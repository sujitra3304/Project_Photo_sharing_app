{% extends 'base.html' %}

{% block title %}Photo{% endblock title%}

{% block content %}
    
<div class ="content-section">
        <div class="article-metadata">
        <div class="user-name">
        <a class="mr-2" href="{{url_for('account',user_id=photo.user.id)}}">{{ photo.user.username }} 
            
        </a>
        {% if following and current_user.id != photo.user.id %}
        <i class="fa-solid fa-user-minus followBtnStatus" id ="follow-btn-{{photo.user_id}}"></i>
        {% elif not following and current_user.id != photo.user.id %}
        <i class="fa-solid fa-user-plus followBtnStatus" id ="follow-btn-{{photo.user_id}}"></i>
        {% endif %}
        
        </div>
        <br>
        <img style="width:400px;" src = "{{photo.url}}">
    
        </div>
        <br>
        {% if photo.user == current_user %}
        <i class="fa-solid fa-trash-can"
            id="delete-photo"></i>
        {% endif %} 
        <div>
            <span id="likes-count">
            {{ photo.likes|length }}</span> 
            {% if likes %}    
            <i class="fa-solid fa-heart" 
                id="like-button"></i>
            {% else %}
            <i class="fa-regular fa-heart"
                id="like-button"></i>
            {% endif %}    
        </div>
        {% if location == False %}
        <i id="add-location" class="fa-solid fa-location-dot"></i>
        {% else %}
        <i id="location-btn" class="fa-solid fa-location-dot"></i>
        {% endif %}
        <div> 
            <h1>Comments</h1>
            {% for comment in comments %}
            <p>{{comment.user.username}}:<br> {{comment.comment}} 
                {% if comment.user_id == current_user.id%}
                <button type="button" class="btn btn-link btn-sm" id="delete-comment-{{comment.id}}">Delete</button>
                {% endif %}
            </p> 
            
            <p>{{comment.comment_date}}</p>
            {% endfor %}
        </div>
        
        <form method="POST" action="{{url_for('add_comment', photo_id=photo.id)}}">
            {{ form.hidden_tag() }}
            <fieldset class="form-group">
                    <div class="form-group">
                        {{ form.comment.label(class="form-control-label") }}
                        {{ form.comment(class="form-control form-control-lg is-invalid") }}
                        {{ form.submit(class="btn btn-outline-info") }}
                    </div>
            </fieldset>
            
        </form>
</div>
<small class="text-muted">
    Return to <a class="ml-2" href="{{ url_for('homepage') }}">Homepage</a>
</small>
{% endblock %}

<!-- <form method="POST" action="/delete_photo/{{photo.id}}" >
    <input class="btn btn-danger" type="submit" value="Delete Photo">    
    </form> -->